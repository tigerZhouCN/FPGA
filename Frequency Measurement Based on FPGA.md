三种通常FPGA测量频率的方法：

直接测频率：直接测周期测频
          直接计数测频率

间接测频率：等精度测频


1.直接计数测频率 

    存在±1的误差，适用于高频信号频率测量 原理： 如下图，设定基准信号，假设基准信号周期为T1，在基准信号一个周期内被测信号上升沿（脉冲）的个数为n（即n个周期）,那么被测信号 的周期即为 T1/n ,也就是频率为n/T1。如果被测信号的第一个上升沿没有和基准信号重合，那么可能存在±1的误差。n越大误差越小，所以仅适用于高频信号的频率测量。   

2.测周期测频率 

    存在±1的误差，适用于低频（周期大）信号 原理： 如下图，设定基准时钟信号周期为T0，在被测信号一个周期内，基准信号的上升沿个数为n个，那么被测信号的周期为nT0，那么被测信号  的频率为1/(nT0)。同上，有±1的误差，此时误差为。    

3.等精度测频率     
    等精度测频实际门控时间不是一个固定值，而是一个与被测信号有关的值，刚好是被测信号的整数倍。在计数允许时间内，同时对标准信号和被测信号进行计数，再通过数学公式推导得到被测信号的频率。由于门控信号是被测信号的整数倍，就消除了对被测信号产生的±l周期误差，但是会产生对标准信号±1周期的误差。等精度测量原理图如下。
    
    从原理图分析，被测信号频率fx的相对误差与被测信号的频率无关；其次，增大“预测闸门”时间或提高 “标准信号”f0频率，可以减小相对误差，提高测量精度；最后，由于一般提供标准频率f0的石英晶振稳定性很高，所以标准信号的相对误差很小，可忽略。假设标准信号的频率为100 MHz，只要实际闸门时间大于或等于1s，就可使测量的最大相对误差小于或等于10-8，即精度达到1／100 MHz。FPGA实现原理图如下：   预置软件闸门信号GATE是由FPGA的定时模块产生，GATE的时间宽度对测频精度的影响较少，故可以在较大的范围内选择。这里选择预置闸门信号的长度为1s。图中的CNT1和CNT2是2个可控的32位高速计数器，CNT1_ENA和CNT2_ENA分别是其计数使能端，基准频率信号f0从CNT1_CLK输入，待测信号fx从CNT2的时钟输入端CONT2_CLK输入，并将fx接到D触发器的clk端。测量时，由FPGA的定时模块产生预置的GATE信号，在GATE为高电平，并且fx的上升沿时，启动2个计数器，分别对被测信号和基准信号计数，关闭计数闸门必须满足，GATE为低电平，且在fx的上升沿。若在一次实际闸门时间Tx中，计数器对被测信号的计数值为Nx，对标准信号的计数值为N0，而标准信号的频率为f0，则被测信号的频率为fx，则fx=(N0／Ns)f0。
